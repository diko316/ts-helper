{"version":3,"file":"define-metadata.function.mjs","sources":["../../lib/meta-data/define-metadata.function.ts"],"sourcesContent":["import { TYPEOF_UNDEFINED } from '../validation';\nimport {\n  DEFAULT_METADATA_PROPERTY_KEY,\n  METADATA_STORE,\n} from './store.constant';\nimport {\n  MetadataKey,\n  MetadataPropertyKey,\n  MetadataTarget,\n  MetadataValue,\n} from './meta-data.type';\nimport { isMetadataKey } from './is-metadata-key.function';\nimport { isMetadataTarget } from './is-metadata-target.function';\nimport { isMetadataPropertyKey } from './is-metadata-property-key.function';\n\nexport function defineMetadata<ClassOrInstance extends MetadataTarget>(\n  key: MetadataKey,\n  value: MetadataValue,\n  target: ClassOrInstance,\n  propertyKey?: MetadataPropertyKey\n): void {\n  if (!isMetadataKey(key) || !isMetadataTarget(target)) {\n    return;\n  }\n\n  // don't store undefined!\n  if (typeof value === TYPEOF_UNDEFINED) {\n    return;\n  }\n\n  let definition = METADATA_STORE.get(target);\n\n  if (!definition) {\n    METADATA_STORE.set(target, (definition = new Map()));\n  }\n\n  const access = isMetadataPropertyKey(propertyKey)\n    ? propertyKey\n    : DEFAULT_METADATA_PROPERTY_KEY;\n\n  let property = definition.get(access);\n  if (!property) {\n    property = new Map();\n    definition.set(access, property);\n  }\n\n  property.set(key, value);\n\n  return;\n}\n"],"names":["isMetadataPropertyKey"],"mappings":";;;;;;AAeM,SAAU,cAAc,CAC5B,GAAgB,EAChB,KAAoB,EACpB,MAAuB,EACvB,WAAiC,EAAA;IAEjC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,EAAE;QACpD,OAAO;AACR,KAAA;;AAGD,IAAA,IAAI,OAAO,KAAK,KAAK,gBAAgB,EAAE;QACrC,OAAO;AACR,KAAA;IAED,IAAI,UAAU,GAAG,cAAc,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IAE5C,IAAI,CAAC,UAAU,EAAE;AACf,QAAA,cAAc,CAAC,GAAG,CAAC,MAAM,GAAG,UAAU,GAAG,IAAI,GAAG,EAAE,EAAE,CAAC;AACtD,KAAA;AAED,IAAA,MAAM,MAAM,GAAGA,aAAqB,CAAC,WAAW,CAAC;AAC/C,UAAE,WAAW;UACX,6BAA6B,CAAC;IAElC,IAAI,QAAQ,GAAG,UAAU,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;IACtC,IAAI,CAAC,QAAQ,EAAE;AACb,QAAA,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAC;AACrB,QAAA,UAAU,CAAC,GAAG,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;AAClC,KAAA;AAED,IAAA,QAAQ,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;IAEzB,OAAO;AACT;;;;"}