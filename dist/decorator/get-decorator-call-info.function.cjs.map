{"version":3,"file":"get-decorator-call-info.function.cjs","sources":["../../lib/decorator/get-decorator-call-info.function.ts"],"sourcesContent":["import { AnyClass, ClassInstance } from '../misc';\nimport { is } from '../validation';\n\nimport {\n  DECORATOR_TYPE_ACCESSOR,\n  DECORATOR_TYPE_CLASS,\n  DECORATOR_TYPE_METHOD,\n  DECORATOR_TYPE_PARAMETER,\n  DECORATOR_TYPE_PROPERTY,\n  DECORATOR_TYPE_STATIC_ACCESSOR,\n  DECORATOR_TYPE_STATIC_METHOD,\n  DECORATOR_TYPE_STATIC_PARAMETER,\n  DECORATOR_TYPE_STATIC_PROPERTY,\n} from './create-decorator.constant';\n\nimport {\n  AccessorDecoratorInfo,\n  ClassDecoratorInfo,\n  DecoratorCallParameters,\n  MethodDecoratorInfo,\n  ParameterDecoratorInfo,\n  PropertyDecoratorInfo,\n  StaticAccessorDecoratorInfo,\n  StaticMethodDecoratorInfo,\n  StaticParameterDecoratorInfo,\n  StaticPropertyDecoratorInfo,\n} from './get-decorator-call-info.type';\n\nexport function getDecoratorCallInfo<Class extends AnyClass>([\n  target,\n  property,\n  descriptorOrIndex,\n]: DecoratorCallParameters<Class>):\n  | null\n  | ClassDecoratorInfo<Class>\n  | PropertyDecoratorInfo<Class>\n  | StaticPropertyDecoratorInfo<Class>\n  | MethodDecoratorInfo<Class>\n  | StaticMethodDecoratorInfo<Class>\n  | AccessorDecoratorInfo<Class>\n  | StaticAccessorDecoratorInfo<Class>\n  | ParameterDecoratorInfo<Class>\n  | StaticParameterDecoratorInfo<Class> {\n  //////// For Class Target\n  if (is<Class>(Function, target)) {\n    // indeed a class target if no property\n    if (!property || !is(String, property)) {\n      return {\n        type: DECORATOR_TYPE_CLASS,\n        target,\n      };\n    }\n\n    // if has 3rd parameter is index, then it's a static\n    if (is(Number, descriptorOrIndex)) {\n      return {\n        type: DECORATOR_TYPE_STATIC_PARAMETER,\n        target,\n        property,\n        index: descriptorOrIndex,\n      };\n    }\n\n    // if 3rd parameter is poperty descriptor\n    if (is<PropertyDescriptor>(Object, descriptorOrIndex)) {\n      // if descriptor value is function, then it's a method decorator call\n      if (is(Function, descriptorOrIndex.value)) {\n        return {\n          type: DECORATOR_TYPE_STATIC_METHOD,\n          target,\n          property,\n          descriptor: descriptorOrIndex,\n        };\n      }\n\n      // if not, this is an accessor decorator call\n      return {\n        type: DECORATOR_TYPE_STATIC_ACCESSOR,\n        target,\n        property,\n        descriptor: descriptorOrIndex,\n      };\n    }\n\n    // or if only property exists, then this is a property decorator call\n    return {\n      type: DECORATOR_TYPE_STATIC_PROPERTY,\n      target,\n      property,\n    };\n  }\n\n  // if target is not an object or property is empty, then this is invalid\n  if (!is<ClassInstance<Class>>(Object, target) || !property) {\n    return null;\n  }\n\n  //////// For Prototype Target\n\n  // if has 3rd parameter is index, then it's a static\n  if (is(Number, descriptorOrIndex)) {\n    return {\n      type: DECORATOR_TYPE_PARAMETER,\n      target,\n      property,\n      index: descriptorOrIndex,\n    };\n  }\n\n  // if 3rd parameter is poperty descriptor\n  if (is<PropertyDescriptor>(Object, descriptorOrIndex)) {\n    // if descriptor value is function, then it's a method decorator call\n    if (is(Function, descriptorOrIndex.value)) {\n      return {\n        type: DECORATOR_TYPE_METHOD,\n        target,\n        property,\n        descriptor: descriptorOrIndex,\n      };\n    }\n\n    // if not, this is an accessor decorator call\n    return {\n      type: DECORATOR_TYPE_ACCESSOR,\n      target,\n      property,\n      descriptor: descriptorOrIndex,\n    };\n  }\n\n  // or if only property exists, then this is a property decorator call\n  return {\n    type: DECORATOR_TYPE_PROPERTY,\n    target,\n    property,\n  };\n}\n"],"names":["is","DECORATOR_TYPE_CLASS","DECORATOR_TYPE_STATIC_PARAMETER","DECORATOR_TYPE_STATIC_METHOD","DECORATOR_TYPE_STATIC_ACCESSOR","DECORATOR_TYPE_STATIC_PROPERTY","DECORATOR_TYPE_PARAMETER","DECORATOR_TYPE_METHOD","DECORATOR_TYPE_ACCESSOR","DECORATOR_TYPE_PROPERTY"],"mappings":";;;;;;AA4BM,SAAU,oBAAoB,CAIH,GAAA,EAAA;AAF/B,IAAA,IAAA,MAAA,GAAA,GAAA,CAAA,CAAA,CAAA,CAAA;AACA,IAAA,IAAA,QAAA,GAAA,GAAA,CAAA,CAAA,CAAA,CAAA;;AAC+B;;AAY/B,IAAA,IAAIA,cAAE,CAAQ,QAAQ,EAAE,MAAM,CAAC,EAAE;;QAE/B,IAAI,CAAC,QAAQ,IAAI,CAACA,cAAE,CAAC,MAAM,EAAE,QAAQ,CAAC,EAAE;YACtC,OAAO;AACL,gBAAA,IAAI,EAAEC,6CAAoB;wBAC1B,MAAM;aACP,CAAC;AACH,SAAA;;AAGD,QAAA,IAAID,cAAE,CAAC,MAAM,EAAE,iBAAiB,CAAC,EAAE;YACjC,OAAO;AACL,gBAAA,IAAI,EAAEE,wDAA+B;wBACrC,MAAM;0BACN,QAAQ;AACR,gBAAA,KAAK,EAAE,iBAAiB;aACzB,CAAC;AACH,SAAA;;AAGD,QAAA,IAAIF,cAAE,CAAqB,MAAM,EAAE,iBAAiB,CAAC,EAAE;;YAErD,IAAIA,cAAE,CAAC,QAAQ,EAAE,iBAAiB,CAAC,KAAK,CAAC,EAAE;gBACzC,OAAO;AACL,oBAAA,IAAI,EAAEG,qDAA4B;4BAClC,MAAM;8BACN,QAAQ;AACR,oBAAA,UAAU,EAAE,iBAAiB;iBAC9B,CAAC;AACH,aAAA;;YAGD,OAAO;AACL,gBAAA,IAAI,EAAEC,uDAA8B;wBACpC,MAAM;0BACN,QAAQ;AACR,gBAAA,UAAU,EAAE,iBAAiB;aAC9B,CAAC;AACH,SAAA;;QAGD,OAAO;AACL,YAAA,IAAI,EAAEC,uDAA8B;oBACpC,MAAM;sBACN,QAAQ;SACT,CAAC;AACH,KAAA;;IAGD,IAAI,CAACL,cAAE,CAAuB,MAAM,EAAE,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE;AAC1D,QAAA,OAAO,IAAI,CAAC;AACb,KAAA;;;AAKD,IAAA,IAAIA,cAAE,CAAC,MAAM,EAAE,iBAAiB,CAAC,EAAE;QACjC,OAAO;AACL,YAAA,IAAI,EAAEM,iDAAwB;oBAC9B,MAAM;sBACN,QAAQ;AACR,YAAA,KAAK,EAAE,iBAAiB;SACzB,CAAC;AACH,KAAA;;AAGD,IAAA,IAAIN,cAAE,CAAqB,MAAM,EAAE,iBAAiB,CAAC,EAAE;;QAErD,IAAIA,cAAE,CAAC,QAAQ,EAAE,iBAAiB,CAAC,KAAK,CAAC,EAAE;YACzC,OAAO;AACL,gBAAA,IAAI,EAAEO,8CAAqB;wBAC3B,MAAM;0BACN,QAAQ;AACR,gBAAA,UAAU,EAAE,iBAAiB;aAC9B,CAAC;AACH,SAAA;;QAGD,OAAO;AACL,YAAA,IAAI,EAAEC,gDAAuB;oBAC7B,MAAM;sBACN,QAAQ;AACR,YAAA,UAAU,EAAE,iBAAiB;SAC9B,CAAC;AACH,KAAA;;IAGD,OAAO;AACL,QAAA,IAAI,EAAEC,gDAAuB;gBAC7B,MAAM;kBACN,QAAQ;KACT,CAAC;AACJ;;;;"}